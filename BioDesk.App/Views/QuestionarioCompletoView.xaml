<UserControl x:Class="BioDesk.App.Views.QuestionarioCompletoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200">
    
    <Grid Background="#fafafa">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" BorderBrush="#e5e7eb" BorderThickness="0,0,0,1" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock FontSize="22" FontWeight="Bold" Text="Declaração de Saúde &amp; Consentimentos"/>
                    <TextBlock FontSize="13" Foreground="#6b7280" Margin="0,4,0,0">
                        <Run Text="Paciente:"/>
                        <Run Text="{Binding NomePaciente, Mode=OneWay}" FontWeight="SemiBold"/>
                        <Run Text="• Data:"/>
                        <Run Text="{Binding DataPreenchimento, StringFormat=dd/MM/yyyy, Mode=OneWay}" FontWeight="SemiBold"/>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="📝 Novo Questionário" 
                            Background="#4f7c6d" Foreground="White" 
                            BorderThickness="0" Padding="16,8" FontWeight="SemiBold"
                            Command="{Binding NovoQuestionarioCommand}"
                            Margin="0,0,10,0"/>
                    <Button Content="📂 Carregar Existente" 
                            Background="White" Foreground="#4f7c6d" 
                            BorderThickness="1" BorderBrush="#4f7c6d" Padding="16,8" FontWeight="SemiBold"
                            Command="{Binding CarregarQuestionarioCommand}"
                            Margin="0,0,10,0"/>
                    <Button Content="🖨️ Imprimir" 
                            Background="White" Foreground="#4f7c6d" 
                            BorderThickness="1" BorderBrush="#4f7c6d" Padding="16,8" FontWeight="SemiBold"
                            Command="{Binding ImprimirCommand}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Conteúdo Principal -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
            <StackPanel>
                
                <!-- Seção 1: Informações Médicas Gerais -->
                <Expander IsExpanded="True" 
                         Background="White" 
                         BorderBrush="#E2E8F0" 
                         BorderThickness="1"
                         Margin="0,0,0,16">
                    <Expander.Header>
                        <TextBlock Text="🩺 Informações Médicas Gerais" 
                                  FontFamily="Segoe UI" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"
                                  Margin="16,12"/>
                    </Expander.Header>
                    <StackPanel Margin="24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,12,0">
                                <TextBlock Text="Tem alguma doença crónica?" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_DoencaCronica"
                                        Text="{Binding DoencaCronica, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="12,0,0,0">
                                <TextBlock Text="Sintomas atuais" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_SintomasAtuais"
                                        Text="{Binding SintomasAtuais, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" Margin="0,16,0,0">
                                <TextBlock Text="Medicação atual" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_MedicacaoAtual"
                                        Text="{Binding MedicacaoAtual, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        AcceptsReturn="True"
                                        MinHeight="80"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- Seção 2: Alergias -->
                <Expander Background="White" 
                         BorderBrush="#E2E8F0" 
                         BorderThickness="1"
                         Margin="0,0,0,16">
                    <Expander.Header>
                        <TextBlock Text="⚠️ Alergias e Intolerâncias" 
                                  FontFamily="Segoe UI" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"
                                  Margin="16,12"/>
                    </Expander.Header>
                    <StackPanel Margin="24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,12,0">
                                <TextBlock Text="Alergias alimentares" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_AlergiasAlimentares"
                                        Text="{Binding AlergiasAlimentares, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="12,0,0,0">
                                <TextBlock Text="Alergias a medicamentos" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_AlergiasMedicamentos"
                                        Text="{Binding AlergiasMedicamentos, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,16,12,0">
                                <TextBlock Text="Alergias ambientais" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_AlergiasAmbientais"
                                        Text="{Binding AlergiasAmbientais, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Grid.Row="1" Margin="12,16,0,0">
                                <TextBlock Text="Outras alergias" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_OutrasAlergias"
                                        Text="{Binding OutrasAlergias, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- Seção 3: Histórico Médico -->
                <Expander Background="White" 
                         BorderBrush="#E2E8F0" 
                         BorderThickness="1"
                         Margin="0,0,0,16">
                    <Expander.Header>
                        <TextBlock Text="🏥 Histórico Médico" 
                                  FontFamily="Segoe UI" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"
                                  Margin="16,12"/>
                    </Expander.Header>
                    <StackPanel Margin="24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                <TextBlock Text="Cirurgias realizadas" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_HistoricoCirurgico"
                                        Text="{Binding HistoricoCirurgico, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        AcceptsReturn="True"
                                        MinHeight="80"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                <TextBlock Text="Fraturas e lesões" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_Fraturas"
                                        Text="{Binding Fraturas, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        AcceptsReturn="True"
                                        MinHeight="80"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- Seção 3.5: Sistemas Corporais Detalhados -->
                <Expander Background="White" 
                         BorderBrush="#E2E8F0" 
                         BorderThickness="1"
                         Margin="0,0,0,16">
                    <Expander.Header>
                        <TextBlock Text="🏥 Sistemas Corporais - Condições Específicas" 
                                  FontFamily="Segoe UI" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"
                                  Margin="16,12"/>
                    </Expander.Header>
                    <StackPanel Margin="24">
                        <!-- 1. Sistema Cardiovascular -->
                        <GroupBox Header="🫀 Sistema Cardiovascular" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Hipertensão" IsChecked="{Binding CardioHipertensao, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Diabetes Tipo 1" IsChecked="{Binding CardioDiabetesTipo1, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Diabetes Tipo 2" IsChecked="{Binding CardioDiabetesTipo2, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Arritmia" IsChecked="{Binding CardioArritmia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Colesterol Alto" IsChecked="{Binding CardioColesterolAlto, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Insuficiência Cardíaca" IsChecked="{Binding CardioInsuficienciaCardiaca, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Angina" IsChecked="{Binding CardioAngina, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding CardioOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema cardiovascular..." 
                                         Text="{Binding CardioOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding CardioOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 2. Sistema Musculoesquelético -->
                        <GroupBox Header="🦴 Sistema Musculoesquelético" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Artrose" IsChecked="{Binding MusculoArtrose, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Tendinite" IsChecked="{Binding MusculoTendinite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Hérnia Discal" IsChecked="{Binding MusculoHerniaDiscal, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Fibromialgia" IsChecked="{Binding MusculoFibromialgia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Artrite" IsChecked="{Binding MusculoArtrite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Bursite" IsChecked="{Binding MusculoBursite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Lombalgia" IsChecked="{Binding MusculoLombalgia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Cervicalgia" IsChecked="{Binding MusculoCervicalgia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding MusculoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema musculoesquelético..." 
                                         Text="{Binding MusculoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding MusculoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 3. Sistema Respiratório -->
                        <GroupBox Header="🫁 Sistema Respiratório" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Asma" IsChecked="{Binding RespiratorioAsma, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Sinusite Crónica" IsChecked="{Binding RespiratorioSinusiteCronica, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Bronquite" IsChecked="{Binding RespiratorioBronquite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Rinite Alérgica" IsChecked="{Binding RespiratorioRiniteAlergica, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Apneia do Sono" IsChecked="{Binding RespiratorioApneiaSono, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding RespiratorioOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema respiratório..." 
                                         Text="{Binding RespiratorioOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding RespiratorioOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 4. Sistema Digestivo -->
                        <GroupBox Header="🍃 Sistema Digestivo" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Gastrite" IsChecked="{Binding DigestivoGastrite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Refluxo" IsChecked="{Binding DigestivoRefluxo, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Síndrome Intestino Irritável" IsChecked="{Binding DigestivoSII, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Intolerância Lactose" IsChecked="{Binding DigestivoIntoleranciaLactose, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Doença de Crohn" IsChecked="{Binding DigestivoDoencaCrohn, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Colite Ulcerosa" IsChecked="{Binding DigestivoColiteUlcerosa, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Obstipação" IsChecked="{Binding DigestivoConstipacao, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding DigestivoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema digestivo..." 
                                         Text="{Binding DigestivoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding DigestivoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 5. Sistema Neurológico -->
                        <GroupBox Header="🧠 Sistema Neurológico" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Enxaquecas" IsChecked="{Binding NeurologicoEnxaquecas, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Ansiedade" IsChecked="{Binding NeurologicoAnsiedade, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Depressão" IsChecked="{Binding NeurologicoDepressao, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Insónia" IsChecked="{Binding NeurologicoInsonia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Epilepsia" IsChecked="{Binding NeurologicoEpilepsia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Vertigens/Tonturas" IsChecked="{Binding NeurologicoVertigensTonturas, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding NeurologicoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema neurológico..." 
                                         Text="{Binding NeurologicoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding NeurologicoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 6. Sistema Endócrino -->
                        <GroupBox Header="🦋 Sistema Endócrino" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Hipotiroidismo" IsChecked="{Binding EndocrinoHipotiroidismo, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Hipertiroidismo" IsChecked="{Binding EndocrinoHipertiroidismo, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="PCOS" IsChecked="{Binding EndocrinoPCOS, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Resistência à Insulina" IsChecked="{Binding EndocrinoResistenciaInsulina, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Menopausa" IsChecked="{Binding EndocrinoMenopausa, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding EndocrinoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema endócrino..." 
                                         Text="{Binding EndocrinoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding EndocrinoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 7. Sistema Renal/Geniturinário -->
                        <GroupBox Header="🔄 Sistema Renal/Geniturinário" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Infeção Urinária" IsChecked="{Binding RenalInfecaoUrinaria, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Cálculos Renais" IsChecked="{Binding RenalCalculosRenais, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Cistite" IsChecked="{Binding RenalCistite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Incontinência" IsChecked="{Binding RenalIncontinencia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding RenalOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema renal/geniturinário..." 
                                         Text="{Binding RenalOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding RenalOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 8. Sistema Pele/Dermatológico -->
                        <GroupBox Header="🌟 Sistema Pele/Dermatológico" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Eczema" IsChecked="{Binding PeleEczema, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Psoríase" IsChecked="{Binding PelePsoriase, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Dermatite" IsChecked="{Binding PeleDermatite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Alergias Cutâneas" IsChecked="{Binding PeleAlergiasCutaneas, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Acne" IsChecked="{Binding PeleAcne, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding PeleOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema de pele..." 
                                         Text="{Binding PeleOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding PeleOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 9. Sistema Oftalmológico -->
                        <GroupBox Header="👁️ Sistema Oftalmológico" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Miopia" IsChecked="{Binding OftalmologicoMiopia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Hipermetropia" IsChecked="{Binding OftalmologicoHipermetropia, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Astigmatismo" IsChecked="{Binding OftalmologicoAstigmatismo, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Glaucoma" IsChecked="{Binding OftalmologicoGlaucoma, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Catarata" IsChecked="{Binding OftalmologicoCatarata, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Conjuntivite" IsChecked="{Binding OftalmologicoConjuntivite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding OftalmologicoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema oftalmológico..." 
                                         Text="{Binding OftalmologicoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding OftalmologicoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 10. Sistema Auditivo/Otorrino -->
                        <GroupBox Header="👂 Sistema Auditivo/Otorrino" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Perdas Auditivas" IsChecked="{Binding AuditivoPerdasAuditivas, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Zumbido no Ouvido" IsChecked="{Binding AuditivoZumbidoOuvido, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Otites Recorrentes" IsChecked="{Binding AuditivoOtitesRecorrentes, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Labirintite" IsChecked="{Binding AuditivoLabirintite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Sinusite" IsChecked="{Binding AuditivoSinusite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding AuditivoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema auditivo/otorrino..." 
                                         Text="{Binding AuditivoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding AuditivoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 11. Sistema Saúde Oral -->
                        <GroupBox Header="🦷 Sistema Saúde Oral" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Cáries" IsChecked="{Binding SaudeOralCaries, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Gengivite" IsChecked="{Binding SaudeOralGengivite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Periodontite" IsChecked="{Binding SaudeOralPeriodontite, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Bruxismo" IsChecked="{Binding SaudeOralBruxismo, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Sensibilidade Dentária" IsChecked="{Binding SaudeOralSensibilidadeDentaria, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Mau Hálito" IsChecked="{Binding SaudeOralMauHalito, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding SaudeOralOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema de saúde oral..." 
                                         Text="{Binding SaudeOralOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding SaudeOralOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 12. Sistema Ginecológico/Reprodutivo Adicional -->
                        <GroupBox Header="♀️ Sistema Ginecológico/Reprodutivo" Margin="0,0,0,16" 
                                 BorderBrush="#E2E8F0" BorderThickness="1">
                            <StackPanel Margin="12">
                                <WrapPanel>
                                    <CheckBox Content="Endometriose" IsChecked="{Binding GinecologicoEndometriose, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Síndrome Ovários Poliquísticos" IsChecked="{Binding GinecologicoSOP, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Miomas" IsChecked="{Binding GinecologicoMiomas, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Ciclos Irregulares" IsChecked="{Binding GinecologicoCiclosIrregulares, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Infeção Urinária Recorrente" IsChecked="{Binding GinecologicoInfecaoUrinaria, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                    <CheckBox Content="Outro" IsChecked="{Binding GinecologicoOutro, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,15,5"/>
                                </WrapPanel>
                                <TextBox PlaceholderText="Especificar outro problema ginecológico..." 
                                         Text="{Binding GinecologicoOutroDescricao, UpdateSourceTrigger=PropertyChanged}" 
                                         IsEnabled="{Binding GinecologicoOutro}" 
                                         Background="White" BorderBrush="#D1D5DB" BorderThickness="1"
                                         Padding="8,6" FontSize="13" Margin="0,8,0,0"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </Expander>

                <!-- Seção 4: Estilo de Vida -->
                <Expander Background="White" 
                         BorderBrush="#E2E8F0" 
                         BorderThickness="1"
                         Margin="0,0,0,16">
                    <Expander.Header>
                        <TextBlock Text="🌿 Estilo de Vida" 
                                  FontFamily="Segoe UI" 
                                  FontSize="16" 
                                  FontWeight="SemiBold"
                                  Foreground="#1E293B"
                                  Margin="16,12"/>
                    </Expander.Header>
                    <StackPanel Margin="24">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,8,0">
                                <TextBlock Text="Exercício físico" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <ComboBox Name="cb_AtividadeFisica"
                                         Text="{Binding AtividadeFisica, UpdateSourceTrigger=PropertyChanged}"
                                         IsEditable="True"
                                         BorderBrush="#D1D5DB"
                                         BorderThickness="1"
                                         Padding="12,8"
                                         FontSize="14"
                                         Margin="0,4,0,0">
                                    <ComboBoxItem Content="Sedentário"/>
                                    <ComboBoxItem Content="Leve (1-2x semana)"/>
                                    <ComboBoxItem Content="Moderado (3-4x semana)"/>
                                    <ComboBoxItem Content="Intenso (5+ x semana)"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="8,0,8,0">
                                <TextBlock Text="Tabagismo" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <ComboBox Name="cb_Tabagismo"
                                         Text="{Binding Tabagismo, UpdateSourceTrigger=PropertyChanged}"
                                         IsEditable="True"
                                         BorderBrush="#D1D5DB"
                                         BorderThickness="1"
                                         Padding="12,8"
                                         FontSize="14"
                                         Margin="0,4,0,0">
                                    <ComboBoxItem Content="Nunca fumou"/>
                                    <ComboBoxItem Content="Ex-fumador"/>
                                    <ComboBoxItem Content="Fumador ocasional"/>
                                    <ComboBoxItem Content="Fumador regular"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="2" Grid.Row="0" Margin="8,0,0,0">
                                <TextBlock Text="Consumo de álcool" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <ComboBox Name="cb_ConsumoAlcool"
                                         Text="{Binding ConsumoAlcool, UpdateSourceTrigger=PropertyChanged}"
                                         IsEditable="True"
                                         BorderBrush="#D1D5DB"
                                         BorderThickness="1"
                                         Padding="12,8"
                                         FontSize="14"
                                         Margin="0,4,0,0">
                                    <ComboBoxItem Content="Não consome"/>
                                    <ComboBoxItem Content="Ocasional"/>
                                    <ComboBoxItem Content="Social"/>
                                    <ComboBoxItem Content="Regular"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <StackPanel Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3" Margin="0,16,0,0">
                                <TextBlock Text="Hábitos alimentares" 
                                          FontFamily="Segoe UI" 
                                          FontSize="14" 
                                          FontWeight="Medium"
                                          Foreground="#374151"/>
                                <TextBox Name="txt_HabitosAlimentares"
                                        Text="{Binding HabitosAlimentares, UpdateSourceTrigger=PropertyChanged}"
                                        Background="White" 
                                        BorderBrush="#D1D5DB"
                                        BorderThickness="1"
                                        Padding="12,8"
                                        FontSize="14"
                                        AcceptsReturn="True"
                                        MinHeight="60"
                                        Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

            </StackPanel>
        </ScrollViewer>

        <!-- Footer com ações -->
        <Border Grid.Row="2" Background="White" BorderBrush="#e5e7eb" BorderThickness="0,1,0,0" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="💾 Sistema em desenvolvimento" 
                             Foreground="#6b7280" 
                             FontSize="12" 
                             VerticalAlignment="Center" 
                             Margin="0,0,16,0"/>
                    <TextBlock Text="{Binding UltimoAutoSave, StringFormat='Versão: {0:dd/MM/yyyy}'}" 
                             Foreground="#6b7280" 
                             FontSize="12" 
                             VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="💾 Guardar" 
                            Background="#4f7c6d" Foreground="White" 
                            BorderThickness="0" Padding="16,8" FontWeight="SemiBold"
                            Command="{Binding GuardarCommand}"
                            Click="TestButton_Click"
                            Margin="0,0,10,0"/>
                    <Button Content="📄 Exportar PDF" 
                            Background="White" Foreground="#4f7c6d" 
                            BorderThickness="1" BorderBrush="#4f7c6d" Padding="16,8" FontWeight="SemiBold"
                            Command="{Binding ExportarPdfCommand}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>